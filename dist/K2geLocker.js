const a=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const r=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const i=window.enmity.modules.common.Toasts,D=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const P=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function _(e){window.enmity.plugins.registerPlugin(e)}const y={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,o)=>window.enmity.modules.filters.byName(e,o),byTypeName:(e,o)=>window.enmity.modules.filters.byTypeName(e,o),byDisplayName:(e,o)=>window.enmity.modules.filters.byDisplayName(e,o)};function K(...e){return window.enmity.modules.bulk(...e)}window.enmity.modules.common;const{components:t}=window.enmity;t.Alert,t.Button,t.FlatList;const U=t.Image;t.ImageBackground,t.KeyboardAvoidingView,t.Modal,t.Pressable,t.RefreshControl,t.ScrollView,t.SectionList,t.StatusBar,t.StyleSheet,t.Switch;const k=t.Text,$=t.TextInput;t.TouchableHighlight,t.TouchableOpacity,t.TouchableWithoutFeedback,t.Touchable;const F=t.View;t.VirtualizedList,t.Form,t.FormArrow,t.FormCTA,t.FormCTAButton,t.FormCardSection,t.FormCheckbox,t.FormDivider,t.FormHint,t.FormIcon;const G=t.FormInput;t.FormLabel,t.FormRadio,t.FormRow;const z=t.FormSection;t.FormSelect,t.FormSubLabel,t.FormSwitch,t.FormTernaryCheckBox,t.FormText,t.FormTextColors,t.FormTextSizes;function f(e,o,n){window.enmity.settings.set(e,o,n)}function d(e,o,n){return window.enmity.settings.get(e,o,n)}function V(e){return window.enmity.patcher.create(e)}function m(e){return window.enmity.assets.getIDByName(e)}function B(e,o){let n="";for(let s=0;s<e.length;s++)n+=String.fromCharCode(e.charCodeAt(s)^o.charCodeAt(s%o.length));return n}const S="Love K2ge3 lol",W=m("img_nitro_star"),Y=m("Small");var H=({settings:e})=>r.createElement(F,null,r.createElement(z,{title:"Settings"},r.createElement(G,{value:e.get("passcode"),title:"Passcode",placeholder:"input your custom passcode here!",onSubmitEditing:o=>{if(o.nativeEvent.text=="")i.open({content:"Please enter your custom passcode",source:Y});else{let n=B(o.nativeEvent.text,`${S[5]}${S[6]}${S[0]}`);e.set("passcode",n),i.open({content:"Successfully set new passcode!",source:W})}},secureTextEntry:!0}))),L;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(L||(L={}));var b;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(b||(b={}));var R;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(R||(R={}));var E;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(E||(E={}));var x;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(x||(x={}));var I;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(I||(I={}));const C=m("img_nitro_star"),j=m("Small"),q={id:"lock",name:"lock",displayName:"lock",description:"Lock the server with passcode",displayDescription:"Lock the server with passcode",type:b.Chat,execute:async function(e,o){d("K2geLocker","passcode")===void 0?i.open({content:"Please set passcode in plugin setting before you lock the server!",source:j}):(f("K2geLocker",o.guild.id,!0),i.open({content:"Successfully locked!",source:C}))}},w=V("K2geLocker"),[J,Q,X]=K(y.byName("MessagesConnected",!1),y.byProps("openLazy","hideActionSheet"),y.byName("GuildTooltipActionSheets",!1)),Z=m("nsfw_gate_lock"),M=m("img_nitro_star"),v=m("Small"),T={name:"K2geLocker",version:"1.0.1",description:"Lock the specific server with passcode.",authors:[{name:"mafu",id:"519760564755365888"}],onStart(){this.commands=[q];let e="0",o=this.name;w.instead(X,"default",(n,s,l)=>(e=s[0].guildId,l.apply(n,s))),w.instead(J,"default",(n,s,l)=>{var c;let g=l.apply(n,s),h=(c=g==null?void 0:g.props)==null?void 0:c.guildId;if(h&&d(this.name,h)){const u=P.createThemedStyleSheet({image:{width:100,height:100,padding:5,marginBottom:15},container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:a.ThemeColorMap.BACKGROUND_PRIMARY},header:{color:a.ThemeColorMap.HEADER_PRIMARY,fontFamily:a.Fonts.PRIMARY_SEMIBOLD,fontWeight:"bold",fontSize:24},description:{color:a.ThemeColorMap.HEADER_SECONDARY,fontSize:16,fontFamily:a.Fonts.PRIMARY_SEMIBOLD,marginLeft:2.5,marginRight:2.5,marginBottom:70,paddingLeft:25,paddingRight:25,paddingTop:5,textAlign:"center"},passcode:{width:100,height:20,marginTop:50,marginBottom:50,borderBottomWidth:1,borderBottomColor:"#ccc"}});return r.createElement(F,{style:u.container},r.createElement(U,{style:u.image,source:Z}),r.createElement(k,{style:u.header},"This server is locked!"),r.createElement($,{style:u.passcode,onSubmitEditing:N=>{N.nativeEvent.text==B(d(this.name,"passcode"),`${o[0]}${o[1]}${o[4]}`)?(f(this.name,h,!1),i.open({content:"Successfully unlocked!",source:M})):i.open({content:"Incorrect password. Try again.",source:v})},secureTextEntry:!0}),r.createElement(k,{style:u.description},"K2geLocker"))}else return g}),w.instead(Q,"openLazy",(n,s,l)=>{s[0];let c=s[1];c.startsWith("instant-invite")||c.startsWith("vanity-url-invite")?D.show({title:"K2geLocker",body:"Select an action you wanna perform:",confirmText:"Lock the Server",cancelText:"Open invite menu",onConfirm:()=>{d(this.name,"passcode")===void 0?i.open({content:"Please set passcode in plugin setting before you lock the server!",source:v}):e=="0"?i.open({content:"It seems that plugin failed to get the server. Please select another channel and try again!",source:v}):(f(this.name,e,!0),i.open({content:"Successfully locked!",source:M}))},onCancel:()=>{l.apply(n,s)}}):l.apply(n,s)})},onStop(){this.commands=[],w.unpatchAll()},getSettingsPanel({settings:e}){return r.createElement(H,{settings:e})}};_(T);
