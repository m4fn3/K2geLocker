const a=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const m=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const s=window.enmity.modules.common.Toasts,E=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const L=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function k(o){window.enmity.plugins.registerPlugin(o)}const S={byProps:(...o)=>window.enmity.modules.filters.byProps(...o),byName:(o,t)=>window.enmity.modules.filters.byName(o,t),byTypeName:(o,t)=>window.enmity.modules.filters.byTypeName(o,t),byDisplayName:(o,t)=>window.enmity.modules.filters.byDisplayName(o,t)};function I(...o){return window.enmity.modules.bulk(...o)}window.enmity.modules.common;const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList;const R=e.Image;e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl,e.ScrollView,e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const f=e.Text,x=e.TextInput;e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const T=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon;const A=e.FormInput;e.FormLabel,e.FormRadio,e.FormRow;const B=e.FormSection;e.FormSelect,e.FormSubLabel,e.FormSwitch,e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;function b(o,t,n){window.enmity.settings.set(o,t,n)}function y(o,t,n){return window.enmity.settings.get(o,t,n)}function N(o){return window.enmity.patcher.create(o)}function l(o){return window.enmity.assets.getIDByName(o)}function v(o,t){let n="";for(let i=0;i<o.length;i++)n+=String.fromCharCode(o.charCodeAt(i)^t.charCodeAt(i%t.length));return n}const g="Love K2ge3 lol",P=l("img_nitro_star"),D=l("Small");var M=({settings:o})=>m.createElement(T,null,m.createElement(B,{title:"Settings"},m.createElement(A,{value:o.get("passcode"),title:"Passcode",placeholder:"input your custom passcode here!",onSubmitEditing:t=>{if(t.nativeEvent.text=="")s.open({content:"Please enter your custom passcode",source:D});else{let n=v(t.nativeEvent.text,`${g[5]}${g[6]}${g[0]}`);o.set("passcode",n),s.open({content:"Successfully set new passcode!",source:P})}},secureTextEntry:!0})));const p=N("K2geLocker"),[_,K]=I(S.byName("MessagesConnected",!1),S.byProps("openLazy","hideActionSheet")),$=l("nsfw_gate_lock"),F=l("img_nitro_star"),h=l("Small"),z={name:"K2geLocker",version:"1.0.1",description:"Lock the specific server with passcode.",authors:[{name:"mafu",id:"519760564755365888"}],onStart(){let o="0",t=this.name;p.instead(_,"default",(n,i,d)=>{var r;let w=d.apply(n,i),u=(r=w==null?void 0:w.props)==null?void 0:r.guildId;if(o=u,u&&y(this.name,u)){const c=L.createThemedStyleSheet({image:{width:100,height:100,padding:5,marginBottom:15},container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:a.ThemeColorMap.BACKGROUND_PRIMARY},header:{color:a.ThemeColorMap.HEADER_PRIMARY,fontFamily:a.Fonts.PRIMARY_SEMIBOLD,fontWeight:"bold",fontSize:24},description:{color:a.ThemeColorMap.HEADER_SECONDARY,fontSize:16,fontFamily:a.Fonts.PRIMARY_SEMIBOLD,marginLeft:2.5,marginRight:2.5,marginBottom:70,paddingLeft:25,paddingRight:25,paddingTop:5,textAlign:"center"},passcode:{width:100,height:20,marginTop:50,marginBottom:50,borderBottomWidth:1,borderBottomColor:"#ccc"}});return m.createElement(T,{style:c.container},m.createElement(R,{style:c.image,source:$}),m.createElement(f,{style:c.header},"This server is locked!"),m.createElement(x,{style:c.passcode,onSubmitEditing:C=>{C.nativeEvent.text==v(y(this.name,"passcode"),`${t[0]}${t[1]}${t[4]}`)?(b(this.name,u,!1),s.open({content:"Successfully unlocked!",source:F})):s.open({content:"Incorrect password. Try again.",source:h})},secureTextEntry:!0}),m.createElement(f,{style:c.description},"K2geLocker"))}else return w}),p.instead(K,"openLazy",(n,i,d)=>{i[0];let r=i[1];console.log(r),r.startsWith("instant-invite")||r.startsWith("vanity-url-invite")?E.show({title:"K2geLocker",body:"Select an action you wanna perform:",confirmText:"Lock the Server",cancelText:"Open invite menu",onConfirm:()=>{y(this.name,"passcode")===void 0?s.open({content:"Please set passcode in plugin setting before you lock the server!",source:h}):o=="0"?s.open({content:"It seems that plugin failed to get the server. Please select another channel and try again!",source:h}):(b(this.name,o,!0),s.open({content:"Successfully locked!",source:F}))},onCancel:()=>{d.apply(n,i)}}):d.apply(n,i)})},onStop(){p.unpatchAll()},getSettingsPanel({settings:o}){return m.createElement(M,{settings:o})}};k(z);
