const p=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const k=window.enmity.modules.common.Toasts,L=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token;const oe=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const P=window.enmity.modules.common.Navigation,ve=window.enmity.modules.common.NavigationNative,ne=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const N=window.enmity.modules.common.Linking,O=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function _e(e){window.enmity.plugins.registerPlugin(e)}function Se(e){return window.enmity.plugins.getPlugin(e)}const R={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,o)=>window.enmity.modules.filters.byName(e,o),byTypeName:(e,o)=>window.enmity.modules.filters.byTypeName(e,o),byDisplayName:(e,o)=>window.enmity.modules.filters.byDisplayName(e,o)};function Ee(e,o){return window.enmity.modules.getModule(e,o)}function re(...e){return window.enmity.modules.bulk(...e)}function Le(...e){return window.enmity.modules.getByProps(...e)}window.enmity.modules.common;const{components:r}=window.enmity;r.Alert;const W=r.Button;r.FlatList;const q=r.Image;r.ImageBackground,r.KeyboardAvoidingView,r.Modal,r.Pressable,r.RefreshControl;const Re=r.ScrollView;r.SectionList,r.StatusBar,r.StyleSheet,r.Switch;const M=r.Text;r.TextInput,r.TouchableHighlight;const Ce=r.TouchableOpacity;r.TouchableWithoutFeedback,r.Touchable;const S=r.View;r.VirtualizedList,r.Form,r.FormArrow,r.FormCTA,r.FormCTAButton,r.FormCardSection,r.FormCheckbox,r.FormDivider,r.FormHint,r.FormIcon,r.FormInput,r.FormLabel,r.FormRadio;const u=r.FormRow,ie=r.FormSection;r.FormSelect,r.FormSubLabel;const F=r.FormSwitch;r.FormTernaryCheckBox,r.FormText,r.FormTextColors,r.FormTextSizes;function y(e,o,n){window.enmity.settings.set(e,o,n)}function m(e,o,n){return window.enmity.settings.get(e,o,n)}function Ie(e){return window.enmity.patcher.create(e)}function g(e){return window.enmity.assets.getIDByName(e)}function J(e,o,n){return window.enmity.utilities.findInReactTree(e,o,n)}function Te(e=30){return window.enmity.utilities.uuid(e)}var v="K2geLocker",le="1.3.6b",Pe="Lock App / Server with passcode!",xe=[{name:"mafu",id:"519760564755365888"}],Be="#00fa9a",Me={name:v,version:le,description:Pe,authors:xe,color:Be};function X(e,o){let n="";for(let w=0;w<e.length;w++)n+=String.fromCharCode(e.charCodeAt(w)^o.charCodeAt(w%o.length));return n}const Ke=Ee(e=>e._dispatcher._actionHandlers._dependencyGraph.nodes),Q=Ke._dispatcher._actionHandlers._dependencyGraph.nodes;function H(e){let o=Object.keys(Q).filter(n=>Q[n].name===e);if(o.length)return Q[o[0]].actionHandler;console.error(`[K2geLocker->getStoreHandlers] ${e} couldn't be found.`)}function De(e,o){let n=[];const w=e.after(S,"render",(T,E,C)=>{Object.keys(o).forEach(x=>{n.includes(x)||o[x](E,C,()=>{n.push(x)})}),n.length===Object.keys(o).length&&w()})}const{native:$}=window.enmity;function se(){$.reload()}$.version,$.build,$.device,$.version;const Ne="https://github.com/m4fn3/K2geLocker",Fe="https://raw.githubusercontent.com/m4fn3/K2geLocker/master/manifest.json",Ae="https://raw.githubusercontent.com/m4fn3/K2geLocker/master/dist/K2geLocker.js",Ue="https://raw.githubusercontent.com/m4fn3/K2geLocker/master/changelogs.json";function $e(e,o){window.enmity.plugins.installPlugin(Ae,()=>{L.show({title:"K2geLocker",body:`Updated from ${e} to ${o}!
Do you want to reload Discord now?`,confirmText:"Yes",cancelText:"Later",onConfirm:()=>se()})})}function ce(e=!1){oe.get(Fe).then(o=>{const n=JSON.parse(o.text),w=Se(n.name);n.version.localeCompare(w.version,void 0,{numeric:!0})===1?(e||!e&&m(v,"ignored")!=n.version)&&oe.get(Ue).then(T=>{const E=JSON.parse(T.text);let C="";E[n.version]&&(C=`

- Changelogs
${E[n.version]}`),L.show({title:"K2geLocker",body:`New version v${n.version} is available!${C}`,confirmText:"Update",cancelText:"Ignore",onConfirm:()=>{y(v,"_updating",!0),$e(w.version,n.version)},onCancel:()=>y(v,"ignored",n.version)})}):e&&L.show({title:"K2geLocker",body:`You are using latest version v${w.version}!`,confirmText:"OK"})}).catch(o=>{o.status===404&&L.show({title:"K2geLocker",body:"Failed to check for updates. Please check GitHub manually.",confirmText:"GitHub",cancelText:"Close",onConfirm:()=>N.openURL(Ne)})})}const ae=ne.createStackNavigator(),[Ge]=re(R.byProps("AppState")),A="Love K2ge3 lol";g("nsfw_gate_lock");const Ye=g("img_nitro_star");g("ic_following");const Oe=g("ic_info_24px"),de=g("Small"),He=g("ic_arrow_back_24px"),G=O.createThemedStyleSheet({container:{backgroundColor:p.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:p.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:p.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:p.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerTitleContainer:{color:p.ThemeColorMap.HEADER_PRIMARY},close:{color:p.ThemeColorMap.HEADER_PRIMARY}});function Z({callbackBefore:e=()=>{},callbackAfter:o=()=>{},isSetup:n=!1,showClose:w=!0,isUnlock:T=!1,component:E=null}){const C=Ge.useWindowDimensions().width,x=Math.min(C,450);function z(){const f=O.createThemedStyleSheet({container:{flex:1,backgroundColor:p.ThemeColorMap.BACKGROUND_PRIMARY,alignSelf:"center",alignItems:"center",justifyContent:"center",width:x},title:{height:40},titleText:{color:p.ThemeColorMap.HEADER_PRIMARY,fontSize:30},circleBox:{flexDirection:"row",height:130,paddingTop:20},white_circle:{width:20,height:20,borderRadius:10,backgroundColor:"white",marginRight:10},gray_circle:{width:20,height:20,borderRadius:10,backgroundColor:"gray",marginRight:10},numberBox:{flexDirection:"row",flexWrap:"wrap",width:300},number:{width:100,height:70,alignItems:"center",justifyContent:"center"},numberText:{color:p.ThemeColorMap.HEADER_PRIMARY,fontSize:30}});let K=m(v,"passcode"),Y=K===void 0?"pass":X(K,`${A[5]}${A[6]}${A[0]}`);const[B,l]=t.useState(""),[a,s]=t.useState("");let c=new Array(Y.length).fill(f.gray_circle);const[d,i]=t.useState(c);let h=n?"Enter new passcode":"Enter passcode ";return h=T?"Unlock Server Lock":h,t.createElement(S,{style:f.container},t.createElement(S,{style:f.title},t.createElement(M,{style:f.titleText},h)),t.createElement(S,{style:f.circleBox},d.map((b,D)=>t.createElement(S,{style:d[D]}))),t.createElement(S,{style:f.numberBox},[1,2,3,4,5,6,7,8,9,"",0,"back"].map((b,D)=>b!==""?t.createElement(Ce,{style:f.number,key:D,onPress:()=>{if(typeof b=="number"){let I=a+b.toString();s(I);let U=d;U[I.length-1]=f.white_circle,i(U),I.length===d.length&&setTimeout(()=>{if(!n)I===Y?(e(),P.pop(),o()):(s(""),i(c),k.open({content:"Incorrect password. Try again.",source:de}));else if(!B)l(I),s(""),c=new Array(d.length).fill(f.gray_circle),i(c),k.open({content:"Retype new passcode to confirm.",source:Oe});else{if(B===I){let ke=X(B,`${A[5]}${A[6]}${A[0]}`);y(v,"passcode",ke),k.open({content:"Successfully set new passcode!",source:Ye})}else k.open({content:"Passcode didn't match.",source:de});P.pop()}},200)}else{let I=a.slice(0,-1);s(I);let U=d;U[I.length]=f.gray_circle,i(U)}}},typeof b=="number"?t.createElement(M,{style:f.numberText},b):t.createElement(q,{source:He})):t.createElement(S,{style:f.number,key:D}))),t.createElement(S,null,[1].filter(b=>n&&!B).map(b=>t.createElement(W,{onPress:()=>{let D=d.length===4?6:4;c=new Array(D).fill(f.gray_circle),i(c),s("")},title:"Change passcode length"}))))}return t.createElement(ve.NavigationContainer,{independent:!0},t.createElement(ae.Navigator,{initialRouteName:"K2geLocker",style:G.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:G.cardStyle,headerStyle:G.header,headerTitleContainerStyle:G.headerTitleContainer,headerTitleAlign:"center",safeAreaInsets:{top:0}}},t.createElement(ae.Screen,{name:"K2geLocker",component:E||z,options:{headerTitleStyle:{color:"white"},headerLeft:()=>{if(w)return t.createElement(W,{color:G.close.color,title:"Close",onPress:()=>P.pop()})},...ne.TransitionPresets.ModalSlideFromBottomIOS}})))}const je="Love K2ge3 lol",Ve="https://github.com/m4fn3/K2geLocker/blob/master/K2genmity.md";g("img_nitro_star"),g("Small");const ze=g("img_account_sync_github_white"),We=g("Discord"),qe=g("img_account_sync_twitter_white"),Je=g("ic_message_retry"),Xe=g("hub-invite"),Qe=g("ic_hammer_and_chisel_24px"),Ze=g("ic_lock"),et=g("toast_image_saved"),tt=g("ic_drag_icon_24px"),ot=g("voice_bar_phone"),nt=g("ic_hide"),rt=Le("acceptInviteAndTransitionToInviteChannel");var it=({settings:e})=>{const o=O.createThemedStyleSheet({container:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:p.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:p.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:p.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}});return t.createElement(Re,null,t.createElement(S,{style:o.container},t.createElement(q,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:o.image}),t.createElement(S,{style:o.title},t.createElement(M,{style:o.name},"K2geLocker"),t.createElement(M,{style:o.author},"by mafu"))),t.createElement(ie,{title:"SETTINGS"},t.createElement(u,{label:"Setup Passcode",trailing:u.Arrow,leading:t.createElement(u.Icon,{source:tt}),subLabel:"Open password setup modal",onPress:()=>{P.push(Z,{isSetup:!0})}}),t.createElement(u,{label:"Reload Discord",trailing:u.Arrow,leading:t.createElement(u.Icon,{source:Je}),subLabel:"Reloading is required in order to properly initialize K2geLocker after enabling plugin",onPress:()=>{se()}}),t.createElement(u,{label:"Enable app-wide locking",subLabel:"You can lock entire app with passcode!",leading:t.createElement(u.Icon,{source:Ze}),trailing:t.createElement(F,{value:e.getBoolean("lock_app",!1),onValueChange:n=>{n&&e.get("passcode")===void 0?(n=!1,L.show({title:"K2geLocker",body:"Please set passcode first!",confirmText:"Ok"})):(e.set("lock_app",n),y(je,"_locked",!1))}})}),t.createElement(u,{label:"Use biometrics authentication",subLabel:"**Using K2genmity is required to get Touch/Face ID to work**",leading:t.createElement(u.Icon,{source:ot}),trailing:t.createElement(F,{value:e.getBoolean("use_bio",!1),onValueChange:n=>{e.get("_isK2genmity")?e.get("_hasBiometricsPerm")?e.set("use_bio",n):(n=!1,L.show({title:"K2geLocker",body:"Please enable biometrics permission by editing Info.plist!",confirmText:"Ok"})):(n=!1,L.show({title:"K2geLocker",body:"Installing K2genmity is required to use biometrics authentication feature!",confirmText:"Check install instructions",cancelText:"Later",onConfirm:()=>{N.openURL(Ve)}}))}})}),t.createElement(u,{label:"Persist server lock",subLabel:"Persist locking until you unlock the server lock by long-pressing the icon or using /unlock command.",leading:t.createElement(u.Icon,{source:Qe}),trailing:t.createElement(F,{value:e.getBoolean("persist_lock",!1),onValueChange:n=>{e.set("persist_lock",n)}})}),t.createElement(u,{label:"Enable invitation menu hijacking",subLabel:"Useful for iPad on which can't long press icon. For servers with inv disabled, use /lock command.",leading:t.createElement(u.Icon,{source:Xe}),trailing:t.createElement(F,{value:e.getBoolean("inv_hijack",!0),onValueChange:n=>{e.set("inv_hijack",n)}})}),t.createElement(u,{label:"Gray out locked server",subLabel:"Gray out the icon of locked servers.",leading:t.createElement(u.Icon,{source:nt}),trailing:t.createElement(F,{value:e.getBoolean("gray_out",!0),onValueChange:n=>{e.set("gray_out",n)}})}),t.createElement(u,{label:"Check for updates",subLabel:"Whether automatically check or not. You can tap here to check manually too.",leading:t.createElement(u.Icon,{source:et}),trailing:t.createElement(F,{value:e.getBoolean("check_updates",!0),onValueChange:n=>{e.set("check_updates",n)}}),onPress:()=>{ce(!0)}})),t.createElement(ie,{title:"INFORMATION"},t.createElement(u,{label:"Follow me on Twitter",style:o.info,trailing:u.Arrow,leading:t.createElement(u.Icon,{source:qe}),onPress:()=>{N.openURL("https://twitter.com/m4fn3")}}),t.createElement(u,{label:"Visit my server for help",style:o.info,trailing:u.Arrow,leading:t.createElement(u.Icon,{source:We}),onPress:()=>{rt.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{P.pop()}})}}),t.createElement(u,{label:"Check Source on GitHub",style:o.info,trailing:u.Arrow,leading:t.createElement(u.Icon,{source:ze}),onPress:()=>{N.openURL("https://github.com/m4fn3/K2geLocker")}})),t.createElement(M,{style:o.footer},`v${le}`))},ue;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(ue||(ue={}));var j;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(j||(j={}));var me;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(me||(me={}));var ge;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(ge||(ge={}));var he;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(he||(he={}));var we;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(we||(we={}));const ye=g("img_nitro_star"),lt=g("Small"),st={id:"lock",name:"lock",displayName:"lock",description:"Lock the server with passcode",displayDescription:"Lock the server with passcode",type:j.Chat,execute:async function(e,o){m(v,"passcode")===void 0?k.open({content:"Please set passcode in plugin setting before you lock the server!",source:lt}):(y(v,o.guild.id,!0),k.open({content:"Successfully locked!",source:ye}))}},ct={id:"unlock",name:"unlock",displayName:"unlock",description:"Unlock server lock",displayDescription:"Unlock server lock",type:j.Chat,execute:async function(e,o){y(v,o.guild.id,!1),k.open({content:"Successfully unlocked!",source:ye})}},V={};N.addEventListener("url",e=>{let o=e.url;o=decodeURIComponent(o.replace("com.hammerandchisel.discord://",""));try{const n=JSON.parse(o);if(n.data===void 0)return;V[n.id]&&(V[n.id](n.data),delete V[n.id])}catch{return}});function fe(e,o=[],n){const w=Te();N.openURL(`com.hammerandchisel.discord://enmity?id=${w}&command=${e}&params=${o.join(",")}`).then(()=>{n&&(V[w]=n)})}const _=Ie("K2geLocker"),[at,dt,ut,be,mt,gt,pe,ht,wt]=re(R.byName("MessagesConnected",!1),R.byName("MessagesWrapperConnected",!1),R.byProps("openLazy","hideActionSheet"),R.byProps("getLastSelectedGuildId"),R.byProps("getMostRecentSelectedTextChannelId"),R.byName("GuildTooltipActionSheets",!1),R.byProps("transitionTo"),R.byProps("getChannels"),R.byProps("popModal")),[yt,ft,bt,Et]=[H("AppStateStore"),H("DeveloperOptionsStore"),H("DefaultRouteStore"),H("ModalDeprecatedStore")],pt=g("nsfw_gate_lock"),ee=g("img_nitro_star"),te=g("Small"),kt=g("ic_locked_24px"),vt=g("ic_full_server_gating_24px");function _t(e,o,n=!1){(n||m("K2geLocker",e)===void 0)&&y("K2geLocker",e,o)}const St={...Me,onStart(){this.commands=[st,ct];let e=this.name;[["inv_hijack",!0],["check_updates",!0],["lock_app",!1],["use_bio",!1],["persist_lock",!1],["gray_out",!0],["_isK2genmity",!1,!0],["_hasBiometricsPerm",!1,!0]].forEach(l=>{_t(...l)});let o=null;function n(l){let a=mt.getMostRecentSelectedTextChannelId(l);o=l;let s=ht.getChannels(l).SELECTABLE;if(s.length!==1){let c=s[0].channel.id!=a?s[0].channel.id:s[1].channel.id;pe.transitionTo(`/channels/${l}/${c}`,void 0)}pe.transitionTo(`/channels/${l}/${a}`,void 0)}function w(l,a=()=>{},s=()=>{}){m(e,"use_bio")&&setTimeout(()=>{fe("K2geLocker",["authentication"],c=>{c=="success"&&(a(),P.pop(),s())})},l)}function T(l,a=!1){let s=m(v,"persist_lock");const c=()=>{(!s||s&&a)&&(y(e,l,!1),k.open({content:"Successfully unlocked!",source:ee}))},d=()=>{n(l)};P.push(Z,{callbackBefore:c,callbackAfter:d,isUnlock:s&&a}),w(300,c,d)}const E=()=>{y(e,"_locked",!1)};function C(){P.push(Z,{callbackBefore:E,showClose:!1})}const[x,z]=wt;z.forEach(l=>{_.instead(x,l,(a,s,c)=>{m(e,"_locked")||c.apply(a,s)})});let f=!0;_.before(bt,"SAVE_LAST_ROUTE",(l,a,s)=>{f&&(m(e,"lock_app")&&m(e,"passcode")!==void 0&&(C(),w(100,E)),f=!1)});let K=!1;_.before(yt,"APP_STATE_UPDATE",(l,a,s)=>{let c=a[0].state;m(e,"lock_app")&&(m(e,"passcode")===void 0?y(e,"lock_app",!1):c=="background"?(m(e,"_locked")||(C(),y(e,"_locked",!0)),K=!0):c=="active"&&m(e,"_locked")&&K&&(K=!1,w(100,E)))}),De(_,{Guild:(l,a,s)=>{const c=J(a,d=>{var i,h,b;return((i=d.props)==null?void 0:i.delayLongPress)==300&&((h=d.props)==null?void 0:h.onGuildSelected)===void 0&&((b=d.props)==null?void 0:b.guild)});c&&(_.before(c.type,"type",(d,i,h)=>{m(e,i[0].guild.id)?m(e,"passcode")===void 0?(y(e,i[0].guild.id,void 0),i[0].onGuildSelected=void 0):i[0].onGuildSelected=T:i[0].onGuildSelected=void 0}),s())},GuildPopoutMenu:(l,a,s)=>{const c=J(a,d=>{var i,h,b;return((i=d.props)==null?void 0:i.guildId)&&((h=d.props)==null?void 0:h.yPos)&&((b=d.props)==null?void 0:b.onClose)});c&&(_.after(c.type,"render",(d,i,h)=>(m(e,i[0].guildId)?h.props.rows=[{icon:vt,text:"Unlock Server",onClick:()=>{T(i[0].guildId,!0)}}]:h.props.rows.unshift({icon:kt,text:"Lock Server",onClick:()=>{if(m(e,"passcode")===void 0)k.open({content:"Please set passcode in plugin setting before you lock the server!",source:te});else if(m(e,i[0].guildId))k.open({content:"This server is already locked!",source:te});else{y(e,i[0].guildId,!0);let b=be.getLastSelectedGuildId();i[0].guildId!==b&&n(i[0].guildId),k.open({content:"Successfully locked!",source:ee})}}}),h)),s())},GuildIcon:(l,a,s)=>{const c=J(a,d=>{var i,h;return((i=d.props)==null?void 0:i.animate)!==void 0&&((h=d.props)==null?void 0:h.selected)!==void 0});c&&_.before(c,"type",(d,i,h)=>{m(e,i[0].guild.id)&&m(v,"gray_out")?i[0].style.opacity=.3:i[0].style.opacity=1})}}),_.instead(gt,"default",(l,a,s)=>(o!==a[0].guildId&&(o=null),s.apply(l,a)));const Y=at||dt;_.instead(Y,"default",(l,a,s)=>{var c;let d=s.apply(l,a),i=(c=d==null?void 0:d.props)==null?void 0:c.guildId;if(i&&m(e,i)&&o!==i){const h=O.createThemedStyleSheet({container:{fontFamily:p.Fonts.PRIMARY_SEMIBOLD,flex:1,alignItems:"center",justifyContent:"center",backgroundColor:p.ThemeColorMap.BACKGROUND_PRIMARY},image:{width:120,height:120,padding:5,marginBottom:30},header:{color:p.ThemeColorMap.HEADER_PRIMARY,fontWeight:"bold",fontSize:25,marginBottom:30},button:{fontSize:30},footer:{color:p.ThemeColorMap.HEADER_SECONDARY,fontSize:16,marginTop:80,marginBottom:70}});return t.createElement(S,{style:h.container},t.createElement(q,{style:h.image,source:pt}),t.createElement(M,{style:h.header},"This server is locked!"),t.createElement(W,{style:h.button,onPress:()=>T(i),title:"Enter passcode"}),t.createElement(M,{style:h.footer},"K2geLocker"))}else return d}),_.instead(ut,"openLazy",(l,a,s)=>{let c=a[1];if((c.startsWith("instant-invite")||c.startsWith("vanity-url-invite"))&&m(e,"inv_hijack")){let d=be.getLastSelectedGuildId();m(e,d)?L.show({title:"K2geLocker",body:"This server is locked",confirmText:"Ok"}):L.show({title:"K2geLocker",body:"Select an action",confirmText:"Lock the Server",cancelText:"Open invite menu",onConfirm:()=>{m(e,"passcode")===void 0?k.open({content:"Please set passcode in plugin setting before you lock the server!",source:te}):(y(e,d,!0),k.open({content:"Successfully locked!",source:ee}))},onCancel:()=>{s.apply(l,a)}})}else s.apply(l,a)}),_.before(ft,"LOGOUT",(l,a,s)=>{L.show({title:"K2geLocker",body:`Automatically disabled itself to prevent app from causing problems!
Please enable plugin manually after you re-login to the account.`,confirmText:"See you again!"}),this.commands=[],_.unpatchAll(),window.enmity.plugins.disablePlugin("K2geLocker")}),fe("K2geLocker",["check"],l=>{y(e,"_isK2genmity",!0),l=="yes"&&y(e,"_hasBiometricsPerm",!0)}),m(e,"check_updates")&&(m(e,"_updating")?y(v,"_updating",!1):ce());let B=m(v,"passcode");if(B!==void 0){let l=X(B,`${e[0]}${e[1]}${e[4]}`);isNaN(l)&&y(e,"passcode",void 0)}setTimeout(()=>console.error("[End]"),3e3)},onStop(){this.commands=[],_.unpatchAll()},getSettingsPanel({settings:e}){return t.createElement(it,{settings:e})}};_e(St);
