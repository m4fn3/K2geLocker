const b=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const o=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const k=window.enmity.modules.common.Toasts,L=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token;const ee=window.enmity.modules.common.REST;window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const R=window.enmity.modules.common.Navigation,ke=window.enmity.modules.common.NavigationNative,te=window.enmity.modules.common.NavigationStack;window.enmity.modules.common.Theme;const B=window.enmity.modules.common.Linking,$=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function ve(e){window.enmity.plugins.registerPlugin(e)}function _e(e){return window.enmity.plugins.getPlugin(e)}const P={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,t)=>window.enmity.modules.filters.byName(e,t),byTypeName:(e,t)=>window.enmity.modules.filters.byTypeName(e,t),byDisplayName:(e,t)=>window.enmity.modules.filters.byDisplayName(e,t)};function Se(e,t){return window.enmity.modules.getModule(e,t)}function oe(...e){return window.enmity.modules.bulk(...e)}function Ee(...e){return window.enmity.modules.getByProps(...e)}window.enmity.modules.common;const{components:r}=window.enmity;r.Alert;const V=r.Button;r.FlatList;const z=r.Image;r.ImageBackground,r.KeyboardAvoidingView,r.Modal,r.Pressable,r.RefreshControl;const Le=r.ScrollView;r.SectionList,r.StatusBar,r.StyleSheet,r.Switch;const N=r.Text;r.TextInput,r.TouchableHighlight;const Ce=r.TouchableOpacity;r.TouchableWithoutFeedback,r.Touchable;const S=r.View;r.VirtualizedList,r.Form,r.FormArrow,r.FormCTA,r.FormCTAButton,r.FormCardSection,r.FormCheckbox,r.FormDivider,r.FormHint,r.FormIcon,r.FormInput,r.FormLabel,r.FormRadio;const m=r.FormRow,ne=r.FormSection;r.FormSelect,r.FormSubLabel;const O=r.FormSwitch;r.FormTernaryCheckBox,r.FormText,r.FormTextColors,r.FormTextSizes;function f(e,t,n){window.enmity.settings.set(e,t,n)}function g(e,t,n){return window.enmity.settings.get(e,t,n)}function Ie(e){return window.enmity.patcher.create(e)}function h(e){return window.enmity.assets.getIDByName(e)}function W(e,t,n){return window.enmity.utilities.findInReactTree(e,t,n)}function Te(e=30){return window.enmity.utilities.uuid(e)}var _="K2geLocker",re="1.3.4",Re="Lock App / Server with passcode!",Pe=[{name:"mafu",id:"519760564755365888"}],Ne="#00fa9a",Me={name:_,version:re,description:Re,authors:Pe,color:Ne};function q(e,t){let n="";for(let y=0;y<e.length;y++)n+=String.fromCharCode(e.charCodeAt(y)^t.charCodeAt(y%t.length));return n}const xe=Se(e=>e._dispatcher._actionHandlers._dependencyGraph.nodes),J=xe._dispatcher._actionHandlers._dependencyGraph.nodes;function H(e){let t=Object.keys(J).filter(n=>J[n].name===e);if(t)return J[t[0]].actionHandler}function Be(e,t){let n=[];const y=e.after(S,"render",(T,E,C)=>{Object.keys(t).forEach(w=>{n.includes(w)||t[w](E,C,()=>{n.push(w)})}),n.length===Object.keys(t).length&&y()})}const{native:F}=window.enmity;function ie(){F.reload()}F.version,F.build,F.device,F.version;const De="https://github.com/m4fn3/K2geLocker",Ke="https://raw.githubusercontent.com/m4fn3/K2geLocker/master/manifest.json",Ae="https://raw.githubusercontent.com/m4fn3/K2geLocker/master/dist/K2geLocker.js",Oe="https://raw.githubusercontent.com/m4fn3/K2geLocker/master/changelogs.json";function Fe(e,t){window.enmity.plugins.installPlugin(Ae,()=>{L.show({title:"K2geLocker",body:`Updated from ${e} to ${t}!
Do you want to reload Discord now?`,confirmText:"Yes",cancelText:"Later",onConfirm:()=>ie()})})}function le(e=!1){ee.get(Ke).then(t=>{const n=JSON.parse(t.text),y=_e(n.name);n.version.localeCompare(y.version,void 0,{numeric:!0})===1?(e||!e&&g(_,"ignored")!=n.version)&&ee.get(Oe).then(T=>{const E=JSON.parse(T.text);let C="";E[n.version]&&(C=`

- Changelogs
${E[n.version]}`),L.show({title:"K2geLocker",body:`New version v${n.version} is available!${C}`,confirmText:"Update",cancelText:"Ignore",onConfirm:()=>{f(_,"_updating",!0),Fe(y.version,n.version)},onCancel:()=>f(_,"ignored",n.version)})}):e&&L.show({title:"K2geLocker",body:`You are using latest version v${y.version}!`,confirmText:"OK"})}).catch(t=>{t.status===404&&L.show({title:"K2geLocker",body:"Failed to check for updates. Please check GitHub manually.",confirmText:"GitHub",cancelText:"Close",onConfirm:()=>B.openURL(De)})})}const se=te.createStackNavigator(),[Ge]=oe(P.byProps("AppState")),D="Love K2ge3 lol";h("nsfw_gate_lock");const Ue=h("img_nitro_star");h("ic_following");const $e=h("ic_info_24px"),ce=h("Small"),He=h("ic_arrow_back_24px"),G=$.createThemedStyleSheet({container:{backgroundColor:b.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,flex:1},cardStyle:{backgroundColor:b.ThemeColorMap.BACKGROUND_MOBILE_PRIMARY,color:b.ThemeColorMap.TEXT_NORMAL},header:{backgroundColor:b.ThemeColorMap.BACKGROUND_MOBILE_SECONDARY,shadowColor:"transparent",elevation:0},headerTitleContainer:{color:b.ThemeColorMap.HEADER_PRIMARY},close:{color:b.ThemeColorMap.HEADER_PRIMARY}});function X({callback:e=null,isSetup:t=!1,showClose:n=!0,isUnlock:y=!1}){const T=Ge.useWindowDimensions().width,E=Math.min(T,450);function C(){const w=$.createThemedStyleSheet({container:{flex:1,backgroundColor:b.ThemeColorMap.BACKGROUND_PRIMARY,alignSelf:"center",alignItems:"center",justifyContent:"center",width:E},title:{height:40},titleText:{color:b.ThemeColorMap.HEADER_PRIMARY,fontSize:30},circleBox:{flexDirection:"row",height:130,paddingTop:20},white_circle:{width:20,height:20,borderRadius:10,backgroundColor:"white",marginRight:10},gray_circle:{width:20,height:20,borderRadius:10,backgroundColor:"gray",marginRight:10},numberBox:{flexDirection:"row",flexWrap:"wrap",width:300},number:{width:100,height:70,alignItems:"center",justifyContent:"center"},numberText:{color:b.ThemeColorMap.HEADER_PRIMARY,fontSize:30}});let K=g(_,"passcode"),M=K===void 0?"pass":q(K,`${D[5]}${D[6]}${D[0]}`);const[x,U]=o.useState(""),[i,l]=o.useState("");let s=new Array(M.length).fill(w.gray_circle);const[a,u]=o.useState(s);let c=t?"Enter new passcode":"Enter passcode ";return c=y?"Unlock Server Lock":c,o.createElement(S,{style:w.container},o.createElement(S,{style:w.title},o.createElement(N,{style:w.titleText},c)),o.createElement(S,{style:w.circleBox},a.map((d,p)=>o.createElement(S,{style:a[p]}))),o.createElement(S,{style:w.numberBox},[1,2,3,4,5,6,7,8,9,"",0,"back"].map((d,p)=>d!==""?o.createElement(Ce,{style:w.number,key:p,onPress:()=>{if(typeof d=="number"){let I=i+d.toString();l(I);let A=a;A[I.length-1]=w.white_circle,u(A),I.length===a.length&&setTimeout(()=>{if(!t)I===M?(R.pop(),e()):(l(""),u(s),k.open({content:"Incorrect password. Try again.",source:ce}));else if(!x)U(I),l(""),s=new Array(a.length).fill(w.gray_circle),u(s),k.open({content:"Retype new passcode to confirm.",source:$e});else{if(x===I){let pe=q(x,`${D[5]}${D[6]}${D[0]}`);f(_,"passcode",pe),k.open({content:"Successfully set new passcode!",source:Ue})}else k.open({content:"Passcode didn't match.",source:ce});R.pop()}},200)}else{let I=i.slice(0,-1);l(I);let A=a;A[I.length]=w.gray_circle,u(A)}}},typeof d=="number"?o.createElement(N,{style:w.numberText},d):o.createElement(z,{source:He})):o.createElement(S,{style:w.number,key:p}))),o.createElement(S,null,[1].filter(d=>t&&!x).map(d=>o.createElement(V,{onPress:()=>{let p=a.length===4?6:4;s=new Array(p).fill(w.gray_circle),u(s),l("")},title:"Change passcode length"}))))}return o.createElement(ke.NavigationContainer,{independent:!0},o.createElement(se.Navigator,{initialRouteName:"K2geLocker",style:G.container,screenOptions:{cardOverlayEnabled:!1,cardShadowEnabled:!1,cardStyle:G.cardStyle,headerStyle:G.header,headerTitleContainerStyle:G.headerTitleContainer,headerTitleAlign:"center",safeAreaInsets:{top:0}}},o.createElement(se.Screen,{name:"K2geLocker",component:C,options:{headerTitleStyle:{color:"white"},headerLeft:()=>{if(n)return o.createElement(V,{color:G.close.color,title:"Close",onPress:()=>R.pop()})},...te.TransitionPresets.ModalSlideFromBottomIOS}})))}const je="Love K2ge3 lol",Ye="https://github.com/m4fn3/K2geLocker/blob/master/K2genmity.md";h("img_nitro_star"),h("Small");const Ve=h("img_account_sync_github_white"),ze=h("Discord"),We=h("img_account_sync_twitter_white"),qe=h("ic_message_retry"),Je=h("hub-invite"),Xe=h("ic_hammer_and_chisel_24px"),Ze=h("ic_lock"),Qe=h("toast_image_saved"),et=h("ic_drag_icon_24px"),tt=h("voice_bar_phone"),ot=Ee("acceptInviteAndTransitionToInviteChannel");var nt=({settings:e})=>{const t=$.createThemedStyleSheet({container:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:b.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:b.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:b.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}});return o.createElement(Le,null,o.createElement(S,{style:t.container},o.createElement(z,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:t.image}),o.createElement(S,{style:t.title},o.createElement(N,{style:t.name},"K2geLocker"),o.createElement(N,{style:t.author},"by mafu"))),o.createElement(ne,{title:"SETTINGS"},o.createElement(m,{label:"Setup Passcode",trailing:m.Arrow,leading:o.createElement(m.Icon,{source:et}),subLabel:"Open password setup modal",onPress:()=>{R.push(X,{isSetup:!0})}}),o.createElement(m,{label:"Reload Discord",trailing:m.Arrow,leading:o.createElement(m.Icon,{source:qe}),subLabel:"Reloading is required in order to properly initialize K2geLocker after enabling plugin",onPress:()=>{ie()}}),o.createElement(m,{label:"Enable app-wide locking",subLabel:"You can lock entire app with passcode!",leading:o.createElement(m.Icon,{source:Ze}),trailing:o.createElement(O,{value:e.getBoolean("lock_app",!1),onValueChange:n=>{n&&e.get("passcode")===void 0?(n=!1,L.show({title:"K2geLocker",body:"Please set passcode first!",confirmText:"Ok"})):(e.set("lock_app",n),f(je,"_locked",!1))}})}),o.createElement(m,{label:"Use biometrics authentication",subLabel:"**Using K2genmity is required to get Touch/Face ID to work**",leading:o.createElement(m.Icon,{source:tt}),trailing:o.createElement(O,{value:e.getBoolean("use_bio",!1),onValueChange:n=>{e.get("_isK2genmity")?e.get("_hasBiometricsPerm")?e.set("use_bio",n):(n=!1,L.show({title:"K2geLocker",body:"Please enable biometrics permission by editing Info.plist!",confirmText:"Ok"})):(n=!1,L.show({title:"K2geLocker",body:"Installing K2genmity is required to use biometrics authentication feature!",confirmText:"Check install instructions",cancelText:"Later",onConfirm:()=>{B.openURL(Ye)}}))}})}),o.createElement(m,{label:"Persist server lock",subLabel:"Persist locking until you unlock the server lock by long-pressing the icon or using /unlock command.",leading:o.createElement(m.Icon,{source:Xe}),trailing:o.createElement(O,{value:e.getBoolean("persist_lock",!1),onValueChange:n=>{e.set("persist_lock",n)}})}),o.createElement(m,{label:"Enable invitation menu hijacking",subLabel:"Useful for iPad on which can't long press icon. For servers with inv disabled, use /lock command.",leading:o.createElement(m.Icon,{source:Je}),trailing:o.createElement(O,{value:e.getBoolean("inv_hijack",!0),onValueChange:n=>{e.set("inv_hijack",n)}})}),o.createElement(m,{label:"Check for updates",subLabel:"Whether automatically check or not. You can tap here to check manually too.",leading:o.createElement(m.Icon,{source:Qe}),trailing:o.createElement(O,{value:e.getBoolean("check_updates",!0),onValueChange:n=>{e.set("check_updates",n)}}),onPress:()=>{le(!0)}})),o.createElement(ne,{title:"INFORMATION"},o.createElement(m,{label:"Follow me on Twitter",style:t.info,trailing:m.Arrow,leading:o.createElement(m.Icon,{source:We}),onPress:()=>{B.openURL("https://twitter.com/m4fn3")}}),o.createElement(m,{label:"Visit my server for help",style:t.info,trailing:m.Arrow,leading:o.createElement(m.Icon,{source:ze}),onPress:()=>{ot.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{R.pop()}})}}),o.createElement(m,{label:"Check Source on GitHub",style:t.info,trailing:m.Arrow,leading:o.createElement(m.Icon,{source:Ve}),onPress:()=>{B.openURL("https://github.com/m4fn3/K2geLocker")}})),o.createElement(N,{style:t.footer},`v${re}`))},ae;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(ae||(ae={}));var j;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(j||(j={}));var de;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(de||(de={}));var ue;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(ue||(ue={}));var me;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(me||(me={}));var ge;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(ge||(ge={}));const he=h("img_nitro_star"),rt=h("Small"),it={id:"lock",name:"lock",displayName:"lock",description:"Lock the server with passcode",displayDescription:"Lock the server with passcode",type:j.Chat,execute:async function(e,t){g(_,"passcode")===void 0?k.open({content:"Please set passcode in plugin setting before you lock the server!",source:rt}):(f(_,t.guild.id,!0),k.open({content:"Successfully locked!",source:he}))}},lt={id:"unlock",name:"unlock",displayName:"unlock",description:"Unlock server lock",displayDescription:"Unlock server lock",type:j.Chat,execute:async function(e,t){f(_,t.guild.id,!1),k.open({content:"Successfully unlocked!",source:he})}},Y={};B.addEventListener("url",e=>{let t=e.url;t=decodeURIComponent(t.replace("com.hammerandchisel.discord://",""));try{const n=JSON.parse(t);if(n.data===void 0)return;Y[n.id]&&(Y[n.id](n.data),delete Y[n.id])}catch{return}});function we(e,t=[],n){const y=Te();B.openURL(`com.hammerandchisel.discord://enmity?id=${y}&command=${e}&params=${t.join(",")}`).then(()=>{n&&(Y[y]=n)})}const v=Ie("K2geLocker"),[st,ct,ye,at,dt,fe,ut]=oe(P.byName("MessagesConnected",!1),P.byProps("openLazy","hideActionSheet"),P.byProps("getLastSelectedGuildId"),P.byProps("getMostRecentSelectedTextChannelId"),P.byName("GuildTooltipActionSheets",!1),P.byProps("transitionTo"),P.byProps("getChannels")),[mt,gt,be,ht]=[H("AppStateStore"),H("DeveloperOptionsStore"),H("ModalDeprecatedStore"),H("GatewayConnectionStore")],wt=h("nsfw_gate_lock"),Z=h("img_nitro_star"),Q=h("Small"),yt=h("ic_locked_24px"),ft=h("ic_full_server_gating_24px");function bt(e,t,n=!1){(n||g("K2geLocker",e)===void 0)&&f("K2geLocker",e,t)}const pt={...Me,onStart(){this.commands=[it,lt];let e=this.name;[["inv_hijack",!0],["check_updates",!0],["lock_app",!1],["use_bio",!1],["persist_lock",!1],["_isK2genmity",!1,!0],["_hasBiometricsPerm",!1,!0]].forEach(i=>{bt(...i)});let t=null;function n(i){let l=at.getMostRecentSelectedTextChannelId(i);t=i;let s=ut.getChannels(i).SELECTABLE;if(s.length!==1){let a=s[0].channel.id!=l?s[0].channel.id:s[1].channel.id;fe.transitionTo(`/channels/${i}/${a}`,void 0)}fe.transitionTo(`/channels/${i}/${l}`,void 0)}function y(i,l){g(e,"use_bio")&&setTimeout(()=>{we("K2geLocker",["authentication"],s=>{s=="success"&&(R.pop(),i())})},l)}function T(i,l=!1){let s=g(_,"persist_lock");const a=()=>{(!s||s&&l)&&(f(e,i,!1),k.open({content:"Successfully unlocked!",source:Z})),n(i)};R.push(X,{callback:a,isUnlock:s&&l}),y(a,300)}const E=()=>{f(e,"_locked",!1)};function C(){R.push(X,{callback:E,showClose:!1})}g(e,"lock_app")&&g(e,"passcode")!==void 0&&(C(),y(E,100));let w=!1;v.before(mt,"APP_STATE_UPDATE",(i,l,s)=>{let a=l[0].state;g(e,"lock_app")&&(g(e,"passcode")===void 0?f(e,"lock_app",!1):a=="background"?(g(e,"_locked")||(C(),f(e,"_locked",!0)),w=!0):a=="active"&&g(e,"_locked")&&w&&(w=!1,y(E,100)))}),Be(v,{Guild:(i,l,s)=>{const a=W(l,u=>{var c,d,p;return((c=u.props)==null?void 0:c.delayLongPress)==300&&((d=u.props)==null?void 0:d.onGuildSelected)===void 0&&((p=u.props)==null?void 0:p.guild)});a&&(v.before(a.type,"type",(u,c,d)=>{g(e,c[0].guild.id)?g(e,"passcode")===void 0?(f(e,c[0].guild.id,void 0),c[0].onGuildSelected=void 0):c[0].onGuildSelected=T:c[0].onGuildSelected=void 0}),s())},GuildPopoutMenu:(i,l,s)=>{const a=W(l,u=>{var c,d,p;return((c=u.props)==null?void 0:c.guildId)&&((d=u.props)==null?void 0:d.yPos)&&((p=u.props)==null?void 0:p.onClose)});a&&(v.after(a.type,"render",(u,c,d)=>(g(e,c[0].guildId)?d.props.rows=[{icon:ft,text:"Unlock Server",onClick:()=>{T(c[0].guildId,!0)}}]:d.props.rows.unshift({icon:yt,text:"Lock Server",onClick:()=>{if(g(e,"passcode")===void 0)k.open({content:"Please set passcode in plugin setting before you lock the server!",source:Q});else if(g(e,c[0].guildId))k.open({content:"This server is already locked!",source:Q});else{f(e,c[0].guildId,!0);let p=ye.getLastSelectedGuildId();c[0].guildId!==p&&n(c[0].guildId),k.open({content:"Successfully locked!",source:Z})}}}),d)),s())},GuildIcon:(i,l,s)=>{const a=W(l,u=>{var c,d;return((c=u.props)==null?void 0:c.animate)!==void 0&&((d=u.props)==null?void 0:d.selected)!==void 0});a&&v.before(a,"type",(u,c,d)=>{g(e,c[0].guild.id)?c[0].style.opacity=.3:c[0].style.opacity=1})}}),v.instead(dt,"default",(i,l,s)=>(t!==l[0].guildId&&(t=null),s.apply(i,l))),v.instead(st,"default",(i,l,s)=>{var a;let u=s.apply(i,l),c=(a=u==null?void 0:u.props)==null?void 0:a.guildId;if(c&&g(e,c)&&t!==c){const d=$.createThemedStyleSheet({container:{fontFamily:b.Fonts.PRIMARY_SEMIBOLD,flex:1,alignItems:"center",justifyContent:"center",backgroundColor:b.ThemeColorMap.BACKGROUND_PRIMARY},image:{width:120,height:120,padding:5,marginBottom:30},header:{color:b.ThemeColorMap.HEADER_PRIMARY,fontWeight:"bold",fontSize:25,marginBottom:30},button:{fontSize:30},footer:{color:b.ThemeColorMap.HEADER_SECONDARY,fontSize:16,marginTop:80,marginBottom:70}});return o.createElement(S,{style:d.container},o.createElement(z,{style:d.image,source:wt}),o.createElement(N,{style:d.header},"This server is locked!"),o.createElement(V,{style:d.button,onPress:()=>T(c),title:"Enter passcode"}),o.createElement(N,{style:d.footer},"K2geLocker"))}else return u}),v.instead(ct,"openLazy",(i,l,s)=>{let a=l[1];if((a.startsWith("instant-invite")||a.startsWith("vanity-url-invite"))&&g(e,"inv_hijack")){let u=ye.getLastSelectedGuildId();g(e,u)?L.show({title:"K2geLocker",body:"This server is locked",confirmText:"Ok"}):L.show({title:"K2geLocker",body:"Select an action",confirmText:"Lock the Server",cancelText:"Open invite menu",onConfirm:()=>{g(e,"passcode")===void 0?k.open({content:"Please set passcode in plugin setting before you lock the server!",source:Q}):(f(e,u,!0),k.open({content:"Successfully locked!",source:Z}))},onCancel:()=>{s.apply(i,l)}})}else s.apply(i,l)}),v.before(gt,"LOGOUT",(i,l,s)=>{L.show({title:"K2geLocker",body:`Automatically disabled itself to prevent app from causing weird problems!
Please enable plugin manually after you re-login to the account.`,confirmText:"See you again!"}),this.commands=[],v.unpatchAll(),window.enmity.plugins.disablePlugin("K2geLocker")});let K=!1,M=[];v.before(ht,"PUSH_NOTIFICATION_CLICK",(i,l,s)=>{K=!0,M=[]});const x=["MODAL_POP_ALL","CHANGE_LOG_CLOSE","CHANNEL_SETTINGS_CLOSE","GUILD_SETTINGS_CLOSE","EMAIL_VERIFICATION_MODAL_CLOSE","NOTIFICATION_SETTINGS_MODAL_CLOSE","SEARCH_MODAL_CLOSE","USER_SETTINGS_MODAL_CLOSE","MENTION_MODAL_CLOSE"];Object.keys(be).forEach(i=>{x.includes(i)&&v.instead(be,i,(l,s,a)=>{K&&!Object.keys(M).includes(i)?M[i]=!0:a.apply(l,s)})}),we("K2geLocker",["check"],i=>{f(e,"_isK2genmity",!0),i=="yes"&&f(e,"_hasBiometricsPerm",!0)}),g(e,"check_updates")&&(g(e,"_updating")?f(_,"_updating",!1):le());let U=g(_,"passcode");if(U!==void 0){let i=q(U,`${e[0]}${e[1]}${e[4]}`);isNaN(i)&&f(e,"passcode",void 0)}},onStop(){this.commands=[],v.unpatchAll()},getSettingsPanel({settings:e}){return o.createElement(nt,{settings:e})}};ve(pt);
